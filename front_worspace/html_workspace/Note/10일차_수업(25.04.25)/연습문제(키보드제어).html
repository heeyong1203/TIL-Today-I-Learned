<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <style>
        body{margin: 0;}
        #stage{
            background-image: url(../../images/plane/bg.jpg);
            width: 100%;
            height: 575px;
            position: relative;
        }
    </style>
    <script>
        let img;
        let stage;
        let bgX=0;
        let x=200;
        let y=275;
        let a=0.03;

        function move(event){
            let key = event.keyCode;
            // console.log(key); 좌우상하 : 37, 39, 38, 40

            
            switch(key){
                case 37 : moveLeft(); break;
                case 38 : moveUp(); break;
                case 39 : moveRight(); break;
                case 40 : moveDown(); break;
            }            
        }

            function moveLeft(){
                if(x>=5){
                    x-=5;
                    img.style.left = x+"px";
                    // 위치 = 현위치 + 계수(목표위치-현위치)
                    // img.style.left = parseFloat(img.style.left)+a*(x-parseFloat(img.style.left))+"px";
                }
                console.log("당신이 누른 키는 왼쪽입니다.")
            }
        
            function moveUp(){
                if(y>=5){
                    y-=5;
                    img.style.top = y+"px";
                    // 위치 = 현위치 + 계수(목표위치-현위치)
                    // img.style.top = parseFloat(img.style.top)+a*(y-parseFloat(img.style.top))+"px";
                }
                console.log("당신이 누른 키는 위쪽입니다.")
            }

            function moveRight(){
                if(x<=600){
                    x+=5;
                    img.style.left = x+"px";
                    // 위치 = 현위치 + 계수(목표위치-현위치)
                    // img.style.left = parseFloat(img.style.left)+a*(x-parseFloat(img.style.left))+"px";
                }
                console.log("당신이 누른 키는 오른쪽입니다.")
            }
        
            function moveDown(){
                if(y<=540){
                    y+=5;
                    img.style.top = y+"px";
                    // 위치 = 현위치 + 계수(목표위치-현위치)
                    // img.style.top = parseFloat(img.style.top)+a*(y-parseFloat(img.style.top))+"px";
                }
                console.log("당신이 누른 키는 아래쪽입니다.")
            }

            function bgEffect(){
                bgX -= 5;
                stage.style.backgroundPosition=bgX+"px 0px";
            }
            
        function init(){
            img = document.createElement("img");
            img.style.position="absolute";
            img.style.width=40+"px";
            img.style.left=200+"px";
            img.style.top=275+"px";
            img.src="../../images/plane/plane.png"

            stage = document.getElementById("stage");
            stage.appendChild(img);

        }

        addEventListener("load", function(){
            init();
            addEventListener("keydown", function(event){
                move(event);
            })
            setInterval("bgEffect()", 10);
        })
    </script>
</head>
<body>
    <div id="stage"></div>
</body>
</html>